version: 0.0
os: linux
files:
  - source: /
    destination: /opt/registration/registration-api

permissions:
  - object: /opt/registration/registration-api
    except: ["dc", "*/wait-for-it.sh"]
    owner: ec2-user

  - object: /opt/registration/registration-api/dc
    mode: 755

  - object: /opt/registration/registration-api
    pattern: "*/wait-for-it.sh"
    mode: 755

hooks:
  ApplicationStop:
    - location: deploy_scripts/stop.sh

  ApplicationStart:
    - location: deploy_scripts/start.sh

  BeforeInstall:
    - location: deploy_scripts/purge.sh
